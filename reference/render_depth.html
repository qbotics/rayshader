<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Render Depth of Field — render_depth • rayshader</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Render Depth of Field — render_depth"><meta property="og:description" content="Adds depth of field to the current RGL scene by simulating a synthetic aperture.
The size of the circle of confusion is determined by the following formula (z_depth is from the image's depth map).
abs(z_depth-focus)*focal_length^2/(f_stop*z_depth*(focus - focal_length))"><meta property="og:image" content="https://www.rayshader.com/reference/figures/website.jpg"><meta property="og:image:alt" content="Picture of a 3D map made with rayshader"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@tylermorganwall"><meta name="twitter:site" content="@tylermorganwall"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rayshader</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.38.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials/Blog Posts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://www.tylermw.com/adding-open-street-map-data-to-rayshader-maps-in-r/" class="external-link">Tutorial: Adding Open Street Map Data to Rayshader Maps in R</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/a-step-by-step-guide-to-making-3d-maps-with-satellite-imagery-in-r/" class="external-link">A Step-by-Step Guide to Making 3D Maps with Satellite Imagery in R</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-ggplots-with-rayshader/" class="external-link">Introducing 3D ggplots with rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/portrait-mode-data/" class="external-link">Portrait Mode for Data: Rayshader + Rayfocus</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-printing-rayshader/" class="external-link">From R to Reality: 3D Printing Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-maps-with-rayshader/" class="external-link">Slicing Through Monterey Bay: Creating 3D Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/making-beautiful-maps/" class="external-link">Draining Lake Mead: Making Beautiful Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/throwing-shade/" class="external-link">Throwing Shade at the Cartographer Illuminati: Raytracing the Washington Monument in R</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    Changelog
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/tylermorganwall/rayshader" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Render Depth of Field</h1>
    <small class="dont-index">Source: <a href="https://github.com/tylermorganwall/rayshader/blob/HEAD/R/render_depth.R" class="external-link"><code>R/render_depth.R</code></a></small>
    <div class="hidden name"><code>render_depth.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds depth of field to the current RGL scene by simulating a synthetic aperture.</p>
<p>The size of the circle of confusion is determined by the following formula (z_depth is from the image's depth map).</p>
<p><code>abs(z_depth-focus)*focal_length^2/(f_stop*z_depth*(focus - focal_length))</code></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">render_depth</span><span class="op">(</span></span>
<span>  focus <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  focallength <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  fstop <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  preview_focus <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bokehshape <span class="op">=</span> <span class="st">"circle"</span>,</span>
<span>  bokehintensity <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  bokehlimit <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  rotation <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  gamma_correction <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  aberration <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  transparent_water <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  heightmap <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  zscale <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  title_text <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  title_offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>  title_color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  title_size <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  title_font <span class="op">=</span> <span class="st">"sans"</span>,</span>
<span>  title_bar_color <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  title_bar_alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  title_position <span class="op">=</span> <span class="st">"northwest"</span>,</span>
<span>  image_overlay <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vignette <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  vignette_color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  vignette_radius <span class="op">=</span> <span class="fl">1.3</span>,</span>
<span>  progbar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  software_render <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  width <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  camera_location <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  camera_lookat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  background <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  text_angle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  text_size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  text_offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  point_radius <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  line_offset <span class="op">=</span> <span class="fl">1e-07</span>,</span>
<span>  cache_scene <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reset_scene_cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  print_scene_info <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  instant_capture <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  clear <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bring_to_front <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>focus</dt>
<dd><p>Focal point. Defaults to the center of the bounding box. Depth in which to blur, in distance to the camera plane.</p></dd>


<dt>focallength</dt>
<dd><p>Default `1`. Focal length of the virtual camera.</p></dd>


<dt>fstop</dt>
<dd><p>Default `1`. F-stop of the virtual camera.</p></dd>


<dt>filename</dt>
<dd><p>The filename of the image to be saved. If this is not given, the image will be plotted instead.</p></dd>


<dt>preview_focus</dt>
<dd><p>Default `FALSE`. If `TRUE`, a red line will be drawn across the image
showing where the camera will be focused.</p></dd>


<dt>bokehshape</dt>
<dd><p>Default `circle`. Also built-in: `hex`. The shape of the bokeh.</p></dd>


<dt>bokehintensity</dt>
<dd><p>Default `3`. Intensity of the bokeh when the pixel intensity is greater than `bokehlimit`.</p></dd>


<dt>bokehlimit</dt>
<dd><p>Default `0.8`. Limit after which the bokeh intensity is increased by `bokehintensity`.</p></dd>


<dt>rotation</dt>
<dd><p>Default `0`. Number of degrees to rotate the hexagon bokeh shape.</p></dd>


<dt>gamma_correction</dt>
<dd><p>Default `TRUE`. Controls gamma correction when adding colors. Default exponent of 2.2.</p></dd>


<dt>aberration</dt>
<dd><p>Default `0`. Adds chromatic aberration to the image. Maximum of `1`.</p></dd>


<dt>transparent_water</dt>
<dd><p>Default `FALSE`. If `TRUE`, depth is determined without water layer. User will have to re-render the water
layer with `render_water()` if they want to recreate the water layer.</p></dd>


<dt>heightmap</dt>
<dd><p>Default `NULL`. The height matrix for the scene. Passing this will allow `render_depth()` 
to automatically redraw the water layer if `transparent_water = TRUE`.</p></dd>


<dt>zscale</dt>
<dd><p>Default `NULL`. The zscale value for the heightmap. Passing this will allow `render_depth()` 
to automatically redraw the water layer if `transparent_water = TRUE`.</p></dd>


<dt>title_text</dt>
<dd><p>Default `NULL`. Text. Adds a title to the image, using magick::image_annotate.</p></dd>


<dt>title_offset</dt>
<dd><p>Default `c(20,20)`. Distance from the top-left (default, `gravity` direction in 
image_annotate) corner to offset the title.</p></dd>


<dt>title_color</dt>
<dd><p>Default `black`. Font color.</p></dd>


<dt>title_size</dt>
<dd><p>Default `30`. Font size in pixels.</p></dd>


<dt>title_font</dt>
<dd><p>Default `sans`. String with font family such as "sans", "mono", "serif", "Times", "Helvetica", 
"Trebuchet", "Georgia", "Palatino" or "Comic Sans".</p></dd>


<dt>title_bar_color</dt>
<dd><p>Default `NULL`. If a color, this will create a colored bar under the title.</p></dd>


<dt>title_bar_alpha</dt>
<dd><p>Default `0.5`. Transparency of the title bar.</p></dd>


<dt>title_position</dt>
<dd><p>Default `northwest`. Position of the title.</p></dd>


<dt>image_overlay</dt>
<dd><p>Default `NULL`. Either a string indicating the location of a png image to overlay
over the image (transparency included), or a 4-layer RGBA array. This image will be resized to the 
dimension of the image if it does not match exactly.</p></dd>


<dt>vignette</dt>
<dd><p>Default `FALSE`. If `TRUE` or numeric, a camera vignetting effect will be added to the image.
`1` is the darkest vignetting, while `0` is no vignetting. If vignette is a length-2 vector, the second entry will
control the blurriness of the vignette effect.</p></dd>


<dt>vignette_color</dt>
<dd><p>Default `"black"`. Color of the vignette.</p></dd>


<dt>vignette_radius</dt>
<dd><p>Default `1.3`. Radius of the vignette, as a porportion of the image dimensions.</p></dd>


<dt>progbar</dt>
<dd><p>Default `TRUE` if in an interactive session. Displays a progress bar.</p></dd>


<dt>software_render</dt>
<dd><p>Default `FALSE`. If `TRUE`, rayshader will use the rayvertex package to render the snapshot, which
is not constrained by the screen size or requires OpenGL.</p></dd>


<dt>width</dt>
<dd><p>Default `NULL`. Optional argument to pass to `rgl::snapshot3d()` to specify the
width when `software_render = TRUE`..</p></dd>


<dt>height</dt>
<dd><p>Default `NULL`. Optional argument to pass to `rgl::snapshot3d()` to specify the
height when `software_render = TRUE`.</p></dd>


<dt>camera_location</dt>
<dd><p>Default `NULL`. Custom position of the camera. The `FOV`, `width`, and `height` arguments will still
be derived from the rgl window.</p></dd>


<dt>camera_lookat</dt>
<dd><p>Default `NULL`. Custom point at which the camera is directed. The `FOV`, `width`, and `height` arguments will still
be derived from the rgl window.</p></dd>


<dt>background</dt>
<dd><p>Default `"white"`. Background color when `software_render = TRUE`.</p></dd>


<dt>text_angle</dt>
<dd><p>Default `NULL`, which forces the text always to face the camera. If a single angle (degrees),
will specify the absolute angle all the labels are facing. If three angles, this will specify all three orientations
(relative to the x,y, and z axes) of the text labels.</p></dd>


<dt>text_size</dt>
<dd><p>Default `10`. Height of the text.</p></dd>


<dt>text_offset</dt>
<dd><p>Default `c(0,0,0)`. Offset to be applied to all text labels.</p></dd>


<dt>point_radius</dt>
<dd><p>Default `0.5`. Radius of 3D points (rendered with `render_points()`.</p></dd>


<dt>line_offset</dt>
<dd><p>Default `1e-7`. Small number indicating the offset in the scene to apply to lines if using software rendering. Increase this if your lines 
aren't showing up, or decrease it if lines are appearing through solid objects.</p></dd>


<dt>cache_scene</dt>
<dd><p>Default `FALSE`. Whether to cache the current scene to memory so it does not have to be converted to a `raymesh` object 
each time `render_snapshot()` is called. If `TRUE` and a scene has been cached, it will be used when rendering.</p></dd>


<dt>reset_scene_cache</dt>
<dd><p>Default `FALSE`. Resets the scene cache before rendering.</p></dd>


<dt>print_scene_info</dt>
<dd><p>Default `FALSE`. If `TRUE`, it will print the position and lookat point of the camera.</p></dd>


<dt>instant_capture</dt>
<dd><p>Default `TRUE` if interactive, `FALSE` otherwise. If `FALSE`, a slight delay is added 
before taking the snapshot. This can help stop prevent rendering issues when running scripts.</p></dd>


<dt>clear</dt>
<dd><p>Default `FALSE`. If `TRUE`, the current `rgl` device will be cleared.</p></dd>


<dt>bring_to_front</dt>
<dd><p>Default `FALSE`. Whether to bring the window to the front when rendering the snapshot.</p></dd>


<dt>...</dt>
<dd><p>Additional parameters to pass to `rayvertex::rasterize_scene()`.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>4-layer RGBA array.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">montereybay</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="sphere_shade.html">sphere_shade</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="plot_3d.html">plot_3d</a></span><span class="op">(</span><span class="va">montereybay</span>,zscale<span class="op">=</span><span class="fl">50</span>, water<span class="op">=</span><span class="cn">TRUE</span>, waterlinecolor<span class="op">=</span><span class="st">"white"</span>,</span></span>
<span class="r-in"><span>         zoom<span class="op">=</span><span class="fl">0.3</span>,theta<span class="op">=</span><span class="op">-</span><span class="fl">135</span>,fov<span class="op">=</span><span class="fl">70</span>, phi<span class="op">=</span><span class="fl">20</span><span class="op">)</span> </span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co">#Preview where the focal plane lies</span></span></span>
<span class="r-in"><span><span class="fu">render_depth</span><span class="op">(</span>preview_focus<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Focus distance: 804.968</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Focal range: 445.34-1729.39</span>
<span class="r-plt img"><img src="render_depth-1.png" alt="" width="768" height="768"></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">#Render the depth of field effect</span></span></span>
<span class="r-in"><span><span class="fu">render_depth</span><span class="op">(</span>focallength <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Focus distance: 804.968</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> Not a matrix.</span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">#Add a chromatic aberration effect</span></span></span>
<span class="r-in"><span><span class="fu">render_depth</span><span class="op">(</span>focallength <span class="op">=</span> <span class="fl">300</span>, aberration <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Focus distance: 804.968</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> Not a matrix.</span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">#Render the depth of field effect, ignoring water and re-drawing the waterlayer</span></span></span>
<span class="r-in"><span><span class="fu">render_depth</span><span class="op">(</span>preview_focus<span class="op">=</span><span class="cn">TRUE</span>, </span></span>
<span class="r-in"><span>            heightmap <span class="op">=</span> <span class="va">montereybay</span>, zscale<span class="op">=</span><span class="fl">50</span>, focallength<span class="op">=</span><span class="fl">300</span>, transparent_water<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">render_depth</span><span class="op">(</span>heightmap <span class="op">=</span> <span class="va">montereybay</span>, zscale<span class="op">=</span><span class="fl">50</span>, focallength<span class="op">=</span><span class="fl">300</span>, transparent_water<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="render_camera.html">render_camera</a></span><span class="op">(</span>theta<span class="op">=</span><span class="fl">45</span>,zoom<span class="op">=</span><span class="fl">0.15</span>,phi<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Focus distance: 804.968</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Focus point (804.968) not in focal range: 0.182576-1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Focus distance: 804.968</span>
<span class="r-plt img"><img src="render_depth-2.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">#Change the bokeh shape and intensity</span></span></span>
<span class="r-in"><span><span class="fu">render_depth</span><span class="op">(</span>focus<span class="op">=</span><span class="fl">900</span>, bokehshape <span class="op">=</span> <span class="st">"circle"</span>,focallength<span class="op">=</span><span class="fl">500</span>,bokehintensity<span class="op">=</span><span class="fl">30</span>,</span></span>
<span class="r-in"><span>            title_text <span class="op">=</span> <span class="st">"Circular Bokeh"</span>, title_size <span class="op">=</span> <span class="fl">30</span>, title_color <span class="op">=</span> <span class="st">"white"</span>, </span></span>
<span class="r-in"><span>            title_bar_color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">render_depth</span><span class="op">(</span>focus<span class="op">=</span><span class="fl">900</span>, bokehshape <span class="op">=</span> <span class="st">"hex"</span>,focallength<span class="op">=</span><span class="fl">500</span>,bokehintensity<span class="op">=</span><span class="fl">30</span>,</span></span>
<span class="r-in"><span>            title_text <span class="op">=</span> <span class="st">"Hexagonal Bokeh"</span>, title_size <span class="op">=</span> <span class="fl">30</span>, title_color <span class="op">=</span> <span class="st">"white"</span>, </span></span>
<span class="r-in"><span>            title_bar_color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> Not a matrix.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">#Add a title and vignette effect.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="render_camera.html">render_camera</a></span><span class="op">(</span>theta<span class="op">=</span><span class="fl">0</span>,zoom<span class="op">=</span><span class="fl">0.7</span>,phi<span class="op">=</span><span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">render_depth</span><span class="op">(</span>focallength <span class="op">=</span> <span class="fl">250</span>, title_text <span class="op">=</span> <span class="st">"Monterey Bay, CA"</span>, </span></span>
<span class="r-in"><span>            title_size <span class="op">=</span> <span class="fl">20</span>, title_color <span class="op">=</span> <span class="st">"white"</span>, title_bar_color <span class="op">=</span> <span class="st">"black"</span>, vignette <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Focus distance: 804.968</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> Not a matrix.</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.tylermw.com" class="external-link">Tyler Morgan-Wall</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

